# TdSecuritiesInterview
For TDSecurities Interview

Used Java 11,Spring boot ,H2 , maven ,lombok, mokito and slf4j.

I have used many to one mapping for trade to ref data and one to one mapping for ref data to valuation.
I have added one test for service layer only to show the way of testing from my side


Stepts to get the result.
1  run InterviewApplication from the project 
2  make a call get localhost:8080/trade from browser or postman

The result i got is given below in jSon format..
[
    {
        "id": 1,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 6998156,
            "uqlOcMmbMs": 0,
            "uqlOcMmbMsPc": 0
        },
        "version": 2,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/3M",
        "description": "CAD 30Jan14 15Dec17 1.69015/3M",
        "tradeDate": "2014-01-29T00:00:00.000+00:00",
        "startDate": "2014-01-30T00:00:00.000+00:00",
        "maturityDate": "2017-12-15T00:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": "0-99",
        "term": null
    },
    {
        "id": 2,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 2604552,
            "uqlOcMmbMs": 0,
            "uqlOcMmbMsPc": 0
        },
        "version": 2,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "3M/Fixed",
        "description": "CAD 24May12 15Mar22 3M/2.30",
        "tradeDate": "2012-05-15T23:00:00.000+00:00",
        "startDate": "2012-05-23T23:00:00.000+00:00",
        "maturityDate": "2022-03-15T00:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": "0-99",
        "term": "6m-1yr"
    },
    {
        "id": 3,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 11683176,
            "uqlOcMmbMs": -14109587,
            "uqlOcMmbMsPc": 14839736
        },
        "version": 1,
        "tradeStatus": "VERIFIED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/USD.LIBOR.3M",
        "description": "USD 04Mar16 04Mar23 1.457/3M",
        "tradeDate": "2016-03-02T00:00:00.000+00:00",
        "startDate": "2016-03-04T00:00:00.000+00:00",
        "maturityDate": "2023-03-04T00:00:00.000+00:00",
        "msPc": -28949323,
        "breakStatus": "100000+",
        "term": "1yr-10yr"
    },
    {
        "id": 4,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Options_MM",
            "portfolio": "NY_SWAP_WASH",
            "bu": 584,
            "cline": "C050 - DERIV - SWAPS",
            "inventory": "NY_SWAP_WASH"
        },
        "book": "NY_SWAP_WASH",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": null,
        "version": 5,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "3M/Fixed",
        "description": "CAD 27Feb15 27Feb20 3M/1.146",
        "tradeDate": "2015-02-27T00:00:00.000+00:00",
        "startDate": "2015-02-27T00:00:00.000+00:00",
        "maturityDate": "2020-02-27T00:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": null,
        "term": null
    },
    {
        "id": 5,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": null,
        "version": 1,
        "tradeStatus": "VERIFIED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/3M",
        "description": "CAD 15Dec14 19Dec16 1.572/3M",
        "tradeDate": "2014-09-15T23:00:00.000+00:00",
        "startDate": "2014-12-15T00:00:00.000+00:00",
        "maturityDate": "2016-12-19T00:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": null,
        "term": null
    },
    {
        "id": 6,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Options_MM",
            "portfolio": "NY_SWAP_WASH",
            "bu": 584,
            "cline": "C050 - DERIV - SWAPS",
            "inventory": "NY_SWAP_WASH"
        },
        "book": "NY_SWAP_WASH",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": null,
        "version": 4,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "3M/Fixed",
        "description": "CAD 10Jul13 10Jul18 3M/2.229",
        "tradeDate": "2013-07-09T23:00:00.000+00:00",
        "startDate": "2013-07-09T23:00:00.000+00:00",
        "maturityDate": "2018-07-09T23:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": null,
        "term": null
    },
    {
        "id": 7,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Options_MM",
            "portfolio": "NY_SWAP_WASH",
            "bu": 584,
            "cline": "C050 - DERIV - SWAPS",
            "inventory": "NY_SWAP_WASH"
        },
        "book": "NY_SWAP_WASH",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": null,
        "version": 5,
        "tradeStatus": "VERIFIED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/USD.LIBOR.3M",
        "description": "USD 10Sep13 10Sep18 1.50/3M",
        "tradeDate": "2013-09-05T23:00:00.000+00:00",
        "startDate": "2013-09-09T23:00:00.000+00:00",
        "maturityDate": "2018-09-09T23:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": null,
        "term": null
    },
    {
        "id": 8,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Options_MM",
            "portfolio": "NY_SWAP_WASH",
            "bu": 584,
            "cline": "C050 - DERIV - SWAPS",
            "inventory": "NY_SWAP_WASH"
        },
        "book": "NY_SWAP_WASH",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": null,
        "version": 4,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/3M",
        "description": "CAD 24Oct14 24Oct19 1.84/3M",
        "tradeDate": "2014-10-23T23:00:00.000+00:00",
        "startDate": "2014-10-23T23:00:00.000+00:00",
        "maturityDate": "2019-10-23T23:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": null,
        "term": null
    },
    {
        "id": 9,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 5323662,
            "uqlOcMmbMs": 0,
            "uqlOcMmbMsPc": 0
        },
        "version": 2,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/3M",
        "description": "CAD 16Sep13 18Sep23 3.097/3M",
        "tradeDate": "2013-07-30T23:00:00.000+00:00",
        "startDate": "2013-09-15T23:00:00.000+00:00",
        "maturityDate": "2023-09-17T23:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": "0-99",
        "term": "1yr-10yr"
    },
    {
        "id": 10,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 11100287,
            "uqlOcMmbMs": -17342316,
            "uqlOcMmbMsPc": 10143987
        },
        "version": 2,
        "tradeStatus": "VERIFIED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "3M/Fixed",
        "description": "CAD 18Dec15 18Dec17 3M/1.00",
        "tradeDate": "2015-10-27T00:00:00.000+00:00",
        "startDate": "2015-12-18T00:00:00.000+00:00",
        "maturityDate": "2017-12-18T00:00:00.000+00:00",
        "msPc": -27486303,
        "breakStatus": "100000+",
        "term": null
    },
    {
        "id": 11,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 8394430,
            "uqlOcMmbMs": 0,
            "uqlOcMmbMsPc": 0
        },
        "version": 4,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "3M/Fixed",
        "description": "CAD 15Sep14 19Sep16 3M/1.438",
        "tradeDate": "2014-07-21T23:00:00.000+00:00",
        "startDate": "2014-09-14T23:00:00.000+00:00",
        "maturityDate": "2016-09-18T23:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": "0-99",
        "term": null
    },
    {
        "id": 12,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 10906628,
            "uqlOcMmbMs": 0,
            "uqlOcMmbMsPc": 0
        },
        "version": 24,
        "tradeStatus": "VERIFIED",
        "productType": "XCCY_SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_XCCY",
        "secCodeSubtype": null,
        "swapType": "Fixed",
        "description": "CAD-USD CCS 26Aug15 26Aug20 1.363/1.75",
        "tradeDate": "2015-08-18T23:00:00.000+00:00",
        "startDate": "2015-08-25T23:00:00.000+00:00",
        "maturityDate": "2020-08-25T23:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": "0-99",
        "term": null
    },
    {
        "id": 13,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Options_MM",
            "portfolio": "IRD_TOR_TOROPT",
            "bu": 584,
            "cline": "C755 - Toronto",
            "inventory": "IRD_TOR_TOROPT"
        },
        "book": "IRD_TOR_TOROPT",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 11254359,
            "uqlOcMmbMs": 30560,
            "uqlOcMmbMsPc": 46050
        },
        "version": 3,
        "tradeStatus": "VERIFIED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/3M",
        "description": "CAD 02Dec15 02Dec20 1.195/3M",
        "tradeDate": "2015-10-13T23:00:00.000+00:00",
        "startDate": "2015-12-02T00:00:00.000+00:00",
        "maturityDate": "2020-12-02T00:00:00.000+00:00",
        "msPc": -15490,
        "breakStatus": "10000-99999",
        "term": null
    },
    {
        "id": 14,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 5574554,
            "uqlOcMmbMs": -3344901,
            "uqlOcMmbMsPc": 7140277
        },
        "version": 2,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/3M",
        "description": "CAD 19Aug13 20Aug18 2.4141/3M",
        "tradeDate": "2013-08-18T23:00:00.000+00:00",
        "startDate": "2013-08-18T23:00:00.000+00:00",
        "maturityDate": "2018-08-19T23:00:00.000+00:00",
        "msPc": -10485178,
        "breakStatus": "100000+",
        "term": null
    },
    {
        "id": 15,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Options_MM",
            "portfolio": "IRD_NYK_NYGAMMA",
            "bu": 584,
            "cline": "C756 - New York",
            "inventory": "IRD_NYK_NYGAMMA"
        },
        "book": "IRD_NYK_NYGAMMA",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": {
            "tradeId": 11597827,
            "uqlOcMmbMs": 0,
            "uqlOcMmbMsPc": 0
        },
        "version": 1,
        "tradeStatus": "VERIFIED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "USD.LIBOR.3M/Fixed",
        "description": "USD 04Aug16 04Aug18 3M/0.974",
        "tradeDate": "2016-02-02T00:00:00.000+00:00",
        "startDate": "2016-08-03T23:00:00.000+00:00",
        "maturityDate": "2018-08-03T23:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": "0-99",
        "term": null
    },
    {
        "id": 16,
        "refDataEntity": {
            "topOfHouse": "TD",
            "segment": "TDS",
            "viceChair": "VC",
            "globalBusiness": "DFID",
            "policy": "CIRT",
            "desk": "Swaps_MM",
            "portfolio": "longterm",
            "bu": 584,
            "cline": "C052 - DERIV - SWAP",
            "inventory": "IRD_TOR_LONGTERM"
        },
        "book": "IRD_TOR_LONGTERM",
        "system": "CALYPSO",
        "legalEntity": "TDBK",
        "valuationEntity": null,
        "version": 2,
        "tradeStatus": "TERMINATED",
        "productType": "SWAP",
        "resettingLeg": null,
        "productSubtype": "Standard",
        "tdsProductType": "SWAP_IR",
        "secCodeSubtype": null,
        "swapType": "Fixed/3M",
        "description": "CAD 17Oct11 01Dec20 2.551/3M",
        "tradeDate": "2011-10-11T23:00:00.000+00:00",
        "startDate": "2011-10-16T23:00:00.000+00:00",
        "maturityDate": "2020-12-01T00:00:00.000+00:00",
        "msPc": 0,
        "breakStatus": null,
        "term": null
    }
]


